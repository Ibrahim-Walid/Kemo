<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Love For You</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Pacifico&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: #1c2d41;
            color: #fff0f7;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Preloader */
        .preloader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #21006e 0%, #ffc1e3 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            visibility: visible;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }

        .preloader-container.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .preloader-heart {
            font-size: 80px;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
        }

        .preloader-text {
            color: white;
            font-size: 24px;
            margin-top: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        /* Floating elements */
        .emoji-rain-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 100000;
    overflow: hidden;
}

.falling-emoji {
    position: absolute;
    font-size: 32px;
    opacity: 1;
    will-change: transform;
}

@keyframes rainDown {
    0% {
        transform: translateY(-100px) rotate(0deg) scale(1);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(360deg) scale(0.3);
        opacity: 0;
    }
}

        /* Music control */
        .music-control {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 1000;
            background: white;
            border: 3px solid #000000;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .music-control:hover {
            background: #fff0f7;
            transform: scale(1.1);
        }

        /* Container */
        .container {
            position: relative;
            z-index: 10;
            width: 100%;
            padding: 0;
            display: none;
        }

        section {
            opacity: 0;
        }

        /* Hero section */
        .hero {
            text-align: center;
            padding: 0;
            min-height: calc(100vh - 1cm);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #1c2d41;
            position: relative;
            overflow: hidden;
            border: 0.5cm solid #1c2d41;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            height: calc(100vh - 1cm);
            width: 100%;
        }

        .hero-center-photo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60vw;
            height: 40vh;
            z-index: 10;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .hero-center-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-photo {
            position: relative;
            overflow: hidden;
        }

        .hero-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-photo.central .hero-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: clamp(1.5em, 5vw, 3em);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            text-align: center;
            z-index: 10;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,107,157,0.1) 0%, transparent 70%);
            animation: heroGlow 8s ease-in-out infinite;
        }

        @keyframes heroGlow {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(10%, 10%) scale(1.1); }
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 900px;
        }

        .hero-badge {
            display: inline-block;
            background: white;
            color: #ffffff;
            padding: 10px 25px;
            border-radius: 50px;
            font-size: clamp(0.9em, 3vw, 1.1em);
            margin-bottom: 30px;
            border: 2px solid #ffc1e3;
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.2);
            animation: badgeBounce 2s ease-in-out infinite;
        }

        @keyframes badgeBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .hero h1 {
            font-size: clamp(2.8em, 10vw, 6em);
            margin-bottom: 25px;
            color: #ffffff;
            text-shadow: 3px 3px 6px rgba(212, 20, 90, 0.2);
            animation: titleFloat 4s ease-in-out infinite;
            line-height: 1.2;
            position: relative;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.02); }
        }

        .hero h1::after {
            content: 'üíï';
            position: absolute;
            top: -30px;
            right: -20px;
            font-size: 0.5em;
            animation: heartRotate 3s linear infinite;
        }

        @keyframes heartRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hero p {
            font-size: clamp(1.3em, 4.5vw, 2em);
            font-style: italic;
            color: #ffffff;
            margin-bottom: 35px;
            text-shadow: 1px 1px 2px rgba(155, 77, 140, 0.1);
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .hero-btn {
            background: linear-gradient(135deg, #ff6b9d 0%, #d4145a 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 35px;
            font-size: clamp(1em, 3.5vw, 1.2em);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(212, 20, 90, 0.3);
            font-family: 'Georgia', serif;
            text-decoration: none;
            display: inline-block;
        }

        .hero-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(212, 20, 90, 0.5);
        }

        .hero-btn.secondary {
            background: white;
            color: #d4145a;
            border: 3px solid #ff6b9d;
        }

        .hero-btn.secondary:hover {
            background: #fff0f7;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 1;
        }

        .shape {
            position: absolute;
            opacity: 0.15;
        }

        .shape1 {
            width: 150px;
            height: 150px;
            background: #000000;
            border-radius: 50%;
            top: 10%;
            left: 10%;
            animation: shapeFloat1 15s ease-in-out infinite;
        }

        .shape2 {
            width: 100px;
            height: 100px;
            background: #ffc1e3;
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            top: 60%;
            right: 15%;
            animation: shapeFloat2 12s ease-in-out infinite;
        }

        .shape3 {
            width: 120px;
            height: 120px;
            background: #d4145a;
            border-radius: 50%;
            bottom: 20%;
            left: 20%;
            animation: shapeFloat3 18s ease-in-out infinite;
        }

        @keyframes shapeFloat1 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(50px, -50px) rotate(180deg); }
        }

        @keyframes shapeFloat2 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-40px, 40px) rotate(-180deg); }
        }

        @keyframes shapeFloat3 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(30px, -60px) scale(1.2); }
        }

        /* Interactive Quiz Section */
        .quiz-section {
            padding: clamp(30px, 8vh, 60px) 20px;
            text-align: center;
            background: none;
            margin: 20px;
            border-radius: 30px;
        }

        .quiz-section h2 {
            font-size: clamp(2.5em, 8vw, 4em);
            color: white;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .quiz-question {
            font-size: clamp(1.1em, 4vw, 1.4em);
            color: #ffffff;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .quiz-option {
            background: linear-gradient(135deg, #ffd6eb 0%, #ffc1e3 100%);
            border: 3px solid #ff6b9d;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: clamp(1em, 3.5vw, 1.2em);
            color: #6b2d5c;
        }

        .quiz-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
            background: linear-gradient(135deg, #ffc1e3 0%, #ff9dc7 100%);
        }

        /* Quiz popup */
        .quiz-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-popup.active {
            display: flex;
        }

        .quiz-popup-content {
            position: relative;
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 30px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(255, 107, 157, 0.5);
            animation: popupBounce 0.5s ease-out;
            text-align: center;
            border: 4px solid #ff6b9d;
        }

        @keyframes popupBounce {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(-50px);
            }
            70% {
                transform: scale(1.05) translateY(0);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .quiz-popup-icon {
            font-size: 60px;
            margin-bottom: 20px;
            animation: iconSpin 0.8s ease-out;
        }

        @keyframes iconSpin {
            0% { transform: rotate(0deg) scale(0); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .quiz-popup-title {
            font-size: clamp(1.5em, 5vw, 2em);
            color: #d4145a;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .quiz-popup-message {
            font-size: clamp(1.1em, 4vw, 1.3em);
            color: #6b2d5c;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .quiz-popup-close {
            background: linear-gradient(135deg, #ff6b9d 0%, #d4145a 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-size: clamp(1em, 3.5vw, 1.2em);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(212, 20, 90, 0.4);
            font-family: 'Georgia', serif;
        }

        .quiz-popup-close:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 20, 90, 0.6);
        }

        /* Birthday Photo */
        .birthday-photo {
            margin-top: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .birthday-image {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid #000000;
            clip-path: inset(0 100% 0 0);
            transition: clip-path 2s ease-out;
        }

        .birthday-photo.animate .birthday-image {
            clip-path: inset(0 0 0 0);
        }

        /* MALAK Birthday Section */
        .malak-birthday-section {
            padding: 60px 20px;
            text-align: center;
            position: relative;
        }

        .malak-birthday-container {
            position: relative;
            display: inline-block;
            margin: 0 auto;
        }

        /* MALAK text */
        .malak-text {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(80px, 16vw, 160px);
            letter-spacing: 5px;
            color: transparent;
            -webkit-text-stroke: 2px #e8f0f6;
            margin: 0;
            line-height: 1;
        }

        /* Birthday neon text */
        .birthday-text {
            position: absolute;
            right: clamp(-10px, -2vw, -20px);
            bottom: clamp(-30px, 3vw, -45px);
            font-family: 'Pacifico', cursive;
            font-size: clamp(60px, 12vw, 120px);
            color: #ff4fd8;
            /* Neon glow */
            text-shadow:
                0 0 5px #ff4fd8,
                0 0 15px #ff4fd8,
                0 0 30px #ff4fd8,
                0 0 60px #ff4fd8;
            margin: 0;
            line-height: 1;
        }

        /* Photo with Neon Cake Section */
        .photo-neon-section {
            padding: 40px 20px;
            text-align: center;
        }

        .photo-with-neon {
            position: relative;
            display: inline-block;
            max-width: 100%;
        }

        .photo-with-neon img {
            display: block;
            width: 90%;
            margin-left: 5%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        /* Neon doodle */
        .neon-cake {
            position: absolute;
            bottom: -50px;
            right: -5px;
            width: 110px;
            height: auto;
            pointer-events: none;
            animation: cake-pulse 2s infinite ease-in-out;
        }

        .neon-cake path,
        .neon-cake circle {
            fill: none;
            stroke: #ff4fd8;
            stroke-width: 3.5;
            stroke-linecap: round;
            stroke-linejoin: round;

            /* neon glow */
            filter:
                drop-shadow(0 0 3px #ff4fd8)
                drop-shadow(0 0 10px #ff4fd8)
                drop-shadow(0 0 20px #ff4fd8);
        }

        @keyframes cake-pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        /* Create Your Love Story Section */
        .create-love-section {
            padding: 60px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 750px;
        }

        .story {
            position: relative;
            width: 320px;
            height: 800px;
            background: transparent;
        }

        /* title */
        .title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: black;
            color: white;
            padding: 6px 14px;
            font-size: 14px;
            border-radius: 4px;
        }

        /* polaroid style */
        .polaroid {
            position: absolute;
            background: white;
            padding: 10px 10px 25px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .polaroid img {
            width: 100%;
            display: block;
        }

        /* positions */
        .photo-1 {
            top: 50px;
            left: 10px;
            width: 180px;
            transform: rotate(-10deg);
        }

        .photo-2 {
            bottom: -40px;
            left: 0px;
            width: 200px;
            transform: rotate(-10deg);
        }

        .photo-3 {
            top: 330px;
            right: -10px;
            width: 180px;
        }

        /* gift stickers in diamond pattern */
        .gift {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 6px;
            overflow: hidden;
            top: 10cm;
        }

        .gift img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .gift-top {
            left: 40px;
            top: 380px;
        }

        .gift-left {
            left: 10px;
            top: 420px;
        }

        .gift-right {
            left: 70px;
            top: 420px;
        }

        .gift-bottom {
            left: 40px;
            top: 460px;
        }

        /* balloons sticker (now a photo) */
        .balloons {
            position: absolute;
            right: -5px;
            top: 100px;
            width: 120px;
            height: auto;
            border-radius: 8px;
            overflow: hidden;
        }

        .balloons img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* subtle floating effect */
        .gift, .balloons {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-6px); }
            100% { transform: translateY(0); }
        }

        /* Love Counter Section */
        .counter-section {
            padding: clamp(30px, 8vh, 60px) 20px;
            text-align: center;
            background: linear-gradient(135deg, #1c2d41 0%, #2d1a3d 100%);
        }

        .counter-section h2 {
            font-size: clamp(1.8em, 6vw, 2.5em);
            color: #ffffff;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .counter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .counter-box {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.15) 0%, rgba(255, 193, 227, 0.1) 100%);
            border-radius: 20px;
            padding: 25px 15px;
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
            border: 2px solid #ff6b9d;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .counter-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(255, 107, 157, 0.5);
            border-color: #d4145a;
        }

        .counter-number {
            font-size: clamp(2em, 6vw, 3em);
            color: #ff6b9d;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 8px rgba(255, 107, 157, 0.3);
        }

        .counter-label {
            font-size: clamp(0.9em, 3vw, 1.1em);
            color: #ffc1e3;
        }



        /* Final Message with Confetti */
        .message-section {
            text-align: center;
            padding: clamp(40px, 10vh, 80px) 20px;
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, transparent 0%, rgba(255,182,193,0.3) 100%);
            position: relative;
        }

        .message-box {
            background: white;
            border: 4px solid #ff6b9d;
            border-radius: 30px;
            padding: clamp(30px, 6vw, 50px);
            box-shadow: 0 20px 50px rgba(255, 107, 157, 0.3);
            max-width: 700px;
            position: relative;
        }

        .message-box p {
            font-size: clamp(1.1em, 3.5vw, 1.4em);
            line-height: 1.8;
            margin-bottom: 20px;
            color: #6b2d5c;
        }

        .signature {
            font-size: clamp(1.2em, 4vw, 1.6em);
            font-style: italic;
            margin-top: 30px;
            color: #d4145a;
            font-weight: bold;
        }

        .confetti-btn {
            background: linear-gradient(135deg, #ff6b9d 0%, #d4145a 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 35px;
            font-size: clamp(1em, 3.5vw, 1.3em);
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(212, 20, 90, 0.4);
            font-family: 'Georgia', serif;
        }

        .confetti-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 20, 90, 0.6);
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 999;
        }

        /* Sparkles */
        .sparkle {
            position: fixed;
            pointer-events: none;
            animation: sparkleAnim 1.5s ease-out forwards;
            z-index: 999;
        }

        @keyframes sparkleAnim {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: scale(2) rotate(180deg);
            }
        }
/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   Envelope & Letter Popup ‚Äì Complete & Fixed
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

.envelope-container {
    perspective: 1200px;
    width: 75%;
    max-width: 300px;
    height: 180px;
    margin: 40px auto;
    cursor: pointer;
    position: relative;
}

.envelope {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.4s ease;
}

.envelope-body {
    position: absolute;
    inset: 0;
    background: #f0a5c8;
    border: 3px solid #ff6b9d;
    border-radius: 12px;
    box-shadow: 0 12px 32px rgba(212, 20, 90, 0.3);
    z-index: 1;
}

/* Heart emoji in the center of the envelope */
.envelope-heart {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 50px;                   /* big heart ‚Äì adjust as needed */
    z-index: 5;                        /* above body, below flap */
    color: #ff6b9d;                    /* matches your theme */
    text-shadow: 0 0 15px rgba(255, 107, 157, 0.7);
    pointer-events: none;              /* doesn't block clicks */
    opacity: 1;
    transition: all 0.8s ease;
    z-index: 100;
    border: #2d1a0f;
    border-width: 20px;
border-image: linear-gradient(135deg, #ff6b9d 0%, #d4145a 100%) 1;
filter: drop-shadow(0 0 10px rgba(255, 107, 157, 0.8)) drop-shadow(0 0 20px rgba(212, 20, 90, 0.5));
animation: heartGlow 2s ease-in-out infinite, heartPulse 1.5s ease-in-out infinite;
}

/* Optional: subtle pulse when envelope is closed */
.envelope:not(.opened) .envelope-heart {
    animation: gentlePulse 3s infinite ease-in-out;
}

@keyframes gentlePulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50%      { transform: translate(-50%, -50%) scale(1.12); }
}

/* When envelope opens ‚Üí heart fades out slightly */
.envelope.opened .envelope-heart {
    opacity: 0.4;
    transform: translate(-50%, -50%) scale(1.3);
}

.envelope-flap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 58%;
    background: linear-gradient(135deg, #f15488, #f15488);
    clip-path: polygon(0 0, 50% 100%, 100% 0);
    transform-origin: top center;
    transition: transform 2s cubic-bezier(0.25, 0.1, 0.25, 1);
    z-index: 10;
    border: 3px solid #ff6b9d;
    border-bottom: none;
    border-radius: 12px 12px 0 0;
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.envelope.opened .envelope-flap {
    transform: rotateX(180deg) translateY(-6px);
}

.letter-paper {
    position: absolute;
    bottom: 8%;
    left: 7%;
    width: 86%;
    height: 0;
    background: #fffef7;
    border: 2px solid #ffe4e1;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    overflow: hidden;
    transition: all 2.2s ease-out;
    z-index: 6;
}

.envelope.opened .letter-paper {
    height: 70%;
    bottom: auto;
    top: -140%;
    opacity: 0;
    transform: scale(0.92) translateY(-20px);
}

/* The outer popup wrapper ‚Äì dark overlay */
.letter-popup {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.75);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    transition: opacity 0.6s ease;
}

.letter-popup.active {
    display: flex;
    opacity: 1;
}

/* The content container ‚Äì starts hidden, animates in */
.letter-popup-content {
    position: relative;
    width: 100%;
    max-width: 640px;
    opacity: 0;
    transform: scale(0.45) translateY(80px); /* starts small & lower */
    transform-origin: center center;
    animation: emergeFromEnvelope 1.1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.4s; /* slight delay after flap opens */
}

/* The actual paper ‚Äì subtle extra scale for depth */
.letter-paper-popup {
    background: #fffef7;
    border: 3px solid #ff003c;
    border-radius: 16px;
    padding: 40px 32px;
    min-height: 380px;
    box-shadow: 
        0 20px 60px rgba(212, 20, 90, 0.45),
        inset 0 2px 8px rgba(255,255,255,0.7);
    position: relative;
    overflow-y: auto;
    max-height: 80vh;
    transform: scale(1);
    transition: transform 0.3s ease;
}

/* Key animation: pop out like coming from envelope */
@keyframes emergeFromEnvelope {
    0% {
        opacity: 0;
        transform: scale(0.45) translateY(80px);
    }
    60% {
        opacity: 0.7;
        transform: scale(1.08) translateY(-15px); /* slight overshoot */
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}
.letter-video-container {
    opacity: 0;
    animation: fadeInUp 0.8s ease-out 1.2s forwards;
}
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
}

.letter-paper-popup::before {
    content: '';
    position: absolute;
    inset: 0;
    background: url('https://www.transparenttextures.com/patterns/cream-paper.png');
    opacity: 0.08;
    pointer-events: none;
}

.letter-content {
    font-family: 'Georgia', serif;
    font-size: clamp(15.5px, 3.4vw, 18px);
    line-height: 1.8;
    color: #2d1a0f;
}

.letter-close {
    position: absolute;
    top: -18px;
    right: -18px;
    width: 44px;
    height: 44px;
    background: #ff6b9d;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 28px;
    line-height: 1;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(255,107,157,0.5);
    transition: all 0.25s;
    z-index: 10;
}

.letter-close:hover {
    transform: scale(1.15) rotate(90deg);
    background: #e55a8b;
}
.letter-paper {
    display: none !important;
}
@keyframes popupAppear {
    from { opacity: 0; transform: scale(0.7) translateY(60px); }
    to   { opacity: 1; transform: scale(1) translateY(0); }
}
/* Video container at bottom of letter popup */
.letter-video-container {
    margin-top: 45px;
    text-align: center;
    padding-top: 20px;
    border-top: 1px dashed #ffd1dc;
}

.letter-video-container h3 {
    font-size: 1.5em;
    color: #d4145a;
    margin-bottom: 18px;
    font-style: italic;
    font-weight: 600;
}

.letter-video-container video {
    width: 100%;
    max-width: 560px;
    border-radius: 14px;
    box-shadow: 0 10px 35px rgba(212, 20, 90, 0.28);
    border: 2px solid #ffc1e3;
    background: #000;
}


/* Ready Screen */
.ready-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #21006e 0%, #ffc1e3 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10002;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.5s ease, visibility 0.5s ease;
}

.ready-container.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.ready-content {
    text-align: center;
}

.ready-question {
    font-size: clamp(2em, 8vw, 3.5em);
    color: white;
    margin-bottom: 40px;
    font-family: 'Georgia', serif;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    font-weight: bold;
}

.ready-emoji {
    font-size: 4em;
    margin-bottom: 30px;
    animation: float 2s ease-in-out infinite;
}

.ready-button {
    background: linear-gradient(135deg, #ff6b9d 0%, #d4145a 100%);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 18px 50px;
    font-size: clamp(1.1em, 3.5vw, 1.5em);
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(212, 20, 90, 0.4);
    font-family: 'Georgia', serif;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.ready-button:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 12px 35px rgba(212, 20, 90, 0.6);
}


        /* Important Moments carousel base styles (injected) */
        .moments-section { padding: 60px 20px; text-align: center; }
        .moments-title { font-size: clamp(1.8em, 5vw, 2.6em); color: #ffffff; margin-bottom: 20px; }
        .moments-carousel { display:flex; align-items:center; justify-content:center; gap:12px; }
        .moments-track-wrapper { width: 860px; overflow-x:auto; overflow-y:hidden; margin: 0 auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; touch-action: pan-y; scroll-behavior: smooth; -ms-overflow-style: none; scrollbar-width: none; }
        .moments-track-wrapper::-webkit-scrollbar { height: 0; display: none; }
        .moments-track { display:flex; gap:18px; list-style:none; padding:0; margin:0; }
        .moment-card { flex: 0 0 260px; background:#2f2f2f; border-radius:12px; overflow:hidden; box-shadow:0 8px 20px rgba(0,0,0,0.12); display:flex; flex-direction:column; scroll-snap-align: center; }
        .moment-photo { width:100%; height:auto; display:block; object-fit:cover; }
        .moment-body { padding:14px; text-align:left; font-family:'Georgia', serif; background:#2f2f2f; color:#ffffff; }
        .moment-date { font-weight:700; color:#d4af37; margin-bottom:8px; }
        .moment-text { font-size:0.95rem; line-height:1.4; color:#ffffff; text-align: center;}
        .moments-arrow { background:white; border:1px solid rgba(0,0,0,0.08); width:44px; height:44px; border-radius:50%; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
        .moments-controls { margin-top:12px; display:flex; justify-content:center; align-items:center; gap:12px; }
        .moments-indicators { display:flex; gap:8px; }
        .moments-indicators button{ width:10px; height:10px; border-radius:50%; border:none; background:rgba(0,0,0,0.15); cursor:pointer; }
        .moments-indicators button.active { background:#d4145a; }
        .moments-counter { color:#ffffff; font-weight:700; }

        @media (max-width:1000px) {
            .moments-track-wrapper { width: calc(100vw - 64px); touch-action: pan-y; }
            .moment-card { flex: 0 0 220px; }
            .moment-photo { height:auto; }
        }


    </style>
</head>
<body>
    <!-- Ready Screen -->
    <div class="ready-container" id="readyContainer">
        <div class="ready-content">
            <div class="ready-emoji">üéÅ</div>
            <div class="ready-question">Are you ready?</div>
            <button class="ready-button" onclick="proceedFromReady()">Yes</button>
        </div>
    </div>

    <!-- Preloader -->
    <div class="preloader-container" id="preloaderContainer">
        <div class="preloader-heart">üíï</div>
        <div class="preloader-text">Loading Love...</div>
    </div>

    
    <!-- Music control -->
    <div class="music-control" id="musicBtn" title="Toggle Music">
        üîä
    </div>

    <!-- Background music -->
    <audio id="bgMusic" loop>
        <source src="./WhatsApp Audio 2026-01-08 at 12.46.50 PM.mpeg" type="audio/mpeg">
    </audio>

    <!-- Quiz Popup -->
    <div class="quiz-popup" id="quizPopup">
        <div class="quiz-popup-content">
            <div class="quiz-popup-icon" id="quizIcon">üéâ</div>
            <div class="quiz-popup-title" id="quizPopupTitle">Correct!</div>
            <div class="quiz-popup-message" id="quizPopupMessage">You know us so well! That makes my heart so happy! üíï</div>
            <button class="quiz-popup-close" onclick="closeQuizPopup()">Close</button>
        </div>
    </div>



    <div class="container">
        <!-- Hero section -->
        <section class="hero">
            <div class="hero-center-photo">
                <img src="./WhatsApp Image 2026-01-08 at 1.10.21 PM.jpeg" alt="Center Photo">
            </div>
            <div class="hero-grid">
                <div class="hero-photo">
                    <img src="./WhatsApp Image 2026-01-08 at .jpeg" alt="Photo 1">
                </div>
                <div class="hero-photo central">
                    <img src="./WhatsApp Image 2026-01-08 at 1.10.15 PM.jpeg" alt="Photo 2">
                    <!-- <div class="hero-text">‚ù§Ô∏è Happy Birthday My Love ‚ù§Ô∏è</div> -->
                </div>
                <div class="hero-photo">
                    <img src="./WhatsApp Image 2026-01-08 at 1.10.22 PM.jpeg" alt="Photo 3">
                </div>
                <div class="hero-photo">
                    <img src="./WhatsApp Image 2026-01-08 at 1.10.22 .jpeg" alt="Photo 4">
                </div>
            </div>
        </section>

        <!-- Interactive Quiz -->
        <section class="quiz-section">
            <h2>HAPPY<br>BIRTHDAY</h2>
            <div class="quiz-container">
                <div class="quiz-question" id="quizQuestion" data-text="My love,
Happy Birthday. You are the most beautiful gift in my life. Your birthday isn't just a date, it's a reminder of how lucky I am to have you. I wish you a year full of joy, peace, and success, and I hope I can always be a reason for your smile, just as you are the reason for my happiness. I love you more than you can imagine." style="line-height: 0.8cm; text-align: justify;"></div>
                <div class="birthday-signature" data-text="Happy Birthday my sweet heart ü´∂üèªüéÇ" style="text-align: center; font-size: larger; text-decoration:double; font-weight: bold;"></div>
                
                <!-- Birthday Photo with fade-in animation -->
                <div class="birthday-photo">
                    <img src="./eyes.jpeg" alt="Birthday Photo" class="birthday-image">
                </div>
            </div>
        </section>

        <!-- MALAK Birthday Section -->
        <section class="malak-birthday-section">
            <div class="malak-birthday-container">
                <div class="malak-text">NOURHANTY</div>
                <div class="birthday-text">Birthday</div>
            </div>
        </section>

        <!-- Photo with Neon Cake Section -->
        <section class="photo-neon-section">
            <div class="photo-with-neon">
                <img src="./below.jpeg" alt="Special Photo">

                <!-- Neon birthday cake doodle -->
                <svg class="neon-cake" viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg">
                    <!-- candle -->
                    <path d="M110 20 L110 45" />
                    <path d="M108 15 Q110 10 112 15" />

                    <!-- bow -->
                    <path d="M90 55 Q75 45 70 60 Q80 75 95 65" />
                    <path d="M130 55 Q145 45 150 60 Q140 75 125 65" />
                    <circle cx="110" cy="60" r="4" />

                    <!-- top cake -->
                    <path d="M75 80 Q110 70 145 80 L145 105 Q110 115 75 105 Z" />

                    <!-- bottom cake -->
                    <path d="M60 115 Q110 105 160 115 L160 155 Q110 165 60 155 Z" />

                    <!-- base line -->
                    <path d="M55 155 Q110 165 165 155" />
                </svg>
            </div>
        </section>

        <!-- Important Moments (new carousel) -->
        <section class="moments-section" id="momentsSection">
            <h2 class="moments-title">üñáÔ∏è Important Moments</h2>
            <div class="moments-carousel">
                <div class="moments-track-wrapper">
                    <ul class="moments-track" id="momentsTrack">
                        <!-- JS will populate 8 items -->
                    </ul>
                </div>
            </div>
            <div class="moments-controls">
                <button class="moments-arrow moments-prev" aria-label="Previous">‚ùÆ</button>
                <div class="moments-counter"><span id="momentsIndex">1</span>/8</div>
                <button class="moments-arrow moments-next" aria-label="Next">‚ùØ</button>
            </div>
        </section>

        <!-- Create Your Love Story Section -->
        <section class="create-love-section">
            <div class="story">

                <!-- Top photo -->
                <div class="polaroid photo-1">
                    <img src="./1-3.jpeg" alt="">
                </div>

                <!-- Photo instead of balloons -->
                <div class="balloons">
                    <img src="./ballons.png" alt="Photo">
                </div>

                <!-- Single Gift photo -->
                <div class="gift">
                    <img src="./gifts.png" alt="Gift Photo">
                </div>

                <!-- Middle photo -->
                <div class="polaroid photo-3">
                    <img src="./1-1.jpeg" alt="">
                </div>

                <!-- Bottom photo -->
                <div class="polaroid photo-2">
                    <img src="./1-2.jpeg" alt="">
                </div>
            </div>
        </section>

        <!-- Love Counter -->
        <section class="counter-section">
            <h2>‚è≥ Our Time Together ü´Ç</h2>
            <div class="counter-grid">
                <div class="counter-box">
                    <div class="counter-number" id="days">0</div>
                    <div class="counter-label">Days</div>
                </div>
                <div class="counter-box">
                    <div class="counter-number" id="hours">0</div>
                    <div class="counter-label">Hours</div>
                </div>
                <div class="counter-box">
                    <div class="counter-number" id="minutes">0</div>
                    <div class="counter-label">Minutes</div>
                </div>
                <div class="counter-box">
                    <div class="counter-number" id="seconds">0</div>
                    <div class="counter-label">Seconds</div>
                </div>
            </div>
        </section>

        <!-- Interactive Envelope Section -->
<section class="message-section">
    <div class="envelope-container" id="envelopeContainer">
        <div class="envelope" id="envelope">
    <div class="envelope-body"></div>
    <div class="envelope-flap"></div>
    
    <!-- Big heart in the center -->
    <div class="envelope-heart">‚ù§Ô∏è</div>

    <!-- Keep this if you still have it (but it's hidden) -->
    <div class="letter-paper" id="letterPaper">
        <div class="letter-content-preview"></div>
    </div>
</div>
    </div>
    
    <div class="tap-hint">‚ú® Tap the envelope to open your letter ‚ú®</div>
    <button class="confetti-btn" onclick="launchConfetti()">üíï Celebrate Our Love üíï</button>
</section>

<!-- Pop-up for the actual letter -->
<div class="letter-popup" id="letterPopup">
    <div class="letter-popup-content">
        <button class="letter-close" onclick="closeLetterPopup()">√ó</button>
        <div class="letter-paper-popup" id="letterPaperPopup">
            <div class="letter-content" id="letterContent">
                <!-- Message goes here -->
            </div>

            <!-- Optional video at bottom (from your previous request) -->
            <div class="letter-video-container">
                <h3>Just for you... üíó</h3>
                <video controls preload="auto">
                    <source src="./pop-up.mp4" type="video/mp4">
                </video>
            </div>
        </div>
    </div>
</div>
</div>
    </div>

    <script>

        // Music control - Initialize first
        const music = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('musicBtn');
        let isPlaying = false;

        // Ready screen handler
        function proceedFromReady() {
            const readyContainer = document.getElementById('readyContainer');
            const preloaderContainer = document.getElementById('preloaderContainer');
            const container = document.querySelector('.container');
            
            // Fade out ready screen
            readyContainer.classList.add('hidden');
            
            // Show container after ready screen starts fading
            setTimeout(() => {
                container.style.display = 'block';
                
                // Hide preloader and start music after 3.8 seconds
                setTimeout(() => {
                    preloaderContainer.classList.add('hidden');
                    startMusic();
                    beginEmojiRain();
                }, 3800);
            }, 100);
        }

        // Music control
        function startMusic() {
            music.muted = true;
            music.volume = 0.5;
            
            music.play().then(() => {
                console.log("Music started playing (muted)");
                // Unmute after short delay
                setTimeout(() => {
                    music.muted = false;
                    isPlaying = true;
                    musicBtn.textContent = 'üîä';
                }, 100);
            }).catch(() => {
                console.log("Autoplay blocked");
                isPlaying = false;
                musicBtn.textContent = 'üîá';
            });
        }

        // Unmute on first user interaction (backup)
        function handleFirstInteraction() {
            if (isPlaying && music.muted) {
                music.muted = false;
                musicBtn.textContent = 'üîä';
            }
        }
        
        ['click', 'touchstart', 'keydown'].forEach(eventType => {
            document.addEventListener(eventType, handleFirstInteraction, { once: true, passive: true });
        });

        // Fade in sections
        const sections = document.querySelectorAll('section');
        
        const fadeIn = (element) => {
            let opacity = 0;
            element.style.opacity = 0;
            element.style.transition = 'opacity 1s ease-in';

            let interval = setInterval(() => {
                if (opacity < 1) {
                    opacity += 0.05;
                    element.style.opacity = opacity;
                } else {
                    clearInterval(interval);
                }
            }, 50);
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    fadeIn(entry.target);
                }
            });
        }, { threshold: 0.1 });

        sections.forEach(section => {
            observer.observe(section);
        });

        // Birthday photo animation
        const birthdayPhoto = document.querySelector('.birthday-photo');
        if (birthdayPhoto) {
            const birthdayObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            birthdayPhoto.classList.add('animate');
                        }, 500); // 500ms delay
                        birthdayObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });
            birthdayObserver.observe(birthdayPhoto);
        }

        // Music button toggle
        musicBtn.addEventListener('click', () => {
            if (isPlaying) {
                music.pause();
                musicBtn.textContent = 'üîá';
                isPlaying = false;
            } else {
                music.play();
                musicBtn.textContent = 'üîä';
                isPlaying = true;
            }
        });

        // Love Counter (Set your relationship start date here)
        const startDate = new Date('2023-06-26T05:46:00'); // June 26, 2023 at 5:46 AM
        
        function updateCounter() {
            const now = new Date();
            const diff = now - startDate;
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
        }
        
        updateCounter();
        setInterval(updateCounter, 1000);

        // Quiz functionality with popup
        const correctAnswer = 2; // Change this to the correct option (0-3)
        const quizPopup = document.getElementById('quizPopup');
        const quizIcon = document.getElementById('quizIcon');
        const quizPopupTitle = document.getElementById('quizPopupTitle');
        const quizPopupMessage = document.getElementById('quizPopupMessage');
        
        function checkAnswer(answer) {
            if (answer === correctAnswer) {
                // Correct answer
                quizIcon.textContent = 'üéâ';
                quizPopupTitle.textContent = 'Amazing! üíï';
                quizPopupMessage.textContent = 'ÿ≠ÿ∑ ŸáŸÜÿß ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ¨Ÿàÿßÿ® ÿßŸÑÿµÿ≠';
                quizPopup.classList.add('active');
                
                // Create celebration sparkles
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        createSparkle(
                            Math.random() * window.innerWidth,
                            Math.random() * window.innerHeight
                        );
                    }, i * 50);
                }
            } else {
                // Wrong answer
                quizIcon.textContent = 'üí≠';
                quizPopupTitle.textContent = 'Not Quite!';
                quizPopupMessage.textContent = 'Nice try though! We can make more memories together so you know us even better! üòä';
                quizPopup.classList.add('active');
            }
        }

        function closeQuizPopup() {
            quizPopup.classList.remove('active');
        }


        // Close popup when clicking outside
        quizPopup.addEventListener('click', (e) => {
            if (e.target === quizPopup) {
                closeQuizPopup();
            }
        });

        // Confetti effect
        function launchConfetti() {
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    createConfetti();
                }, i * 30);
            }
        }

        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            const confettiSymbols = ['üíó','üå∏','üéâ','üí´','üåπ','‚ú®'];
            confetti.textContent = confettiSymbols[Math.floor(Math.random() * confettiSymbols.length)];
            confetti.style.left = Math.random() * window.innerWidth + 'px';
            confetti.style.top = '-50px';
            confetti.style.fontSize = (Math.random() * 20 + 15) + 'px';
            confetti.style.position = 'fixed';
            
            document.body.appendChild(confetti);
            
            const duration = Math.random() * 3 + 2;
            const rotation = Math.random() * 360;
            const xMovement = (Math.random() - 0.5) * 200;
            
            confetti.animate([
                { transform: 'translateY(0) rotate(0deg) translateX(0)', opacity: 1 },
                { transform: `translateY(${window.innerHeight + 100}px) rotate(${rotation}deg) translateX(${xMovement}px)`, opacity: 0 }
            ], {
                duration: duration * 1000,
                easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
            });
            
            setTimeout(() => confetti.remove(), duration * 1000);
        }



        // Sparkle effect
        function createSparkle(x, y) {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.textContent = '‚ú®';
                    sparkle.style.left = (x + (Math.random() - 0.5) * 100) + 'px';
                    sparkle.style.top = (y + (Math.random() - 0.5) * 100) + 'px';
                    sparkle.style.fontSize = (Math.random() * 20 + 15) + 'px';
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => sparkle.remove(), 1500);
                }, i * 100);
            }
        }

        document.addEventListener('click', (e) => {
            if (Math.random() > 0.7) {
                createSparkle(e.pageX, e.pageY);
            }
        });

        // Typewriter effect for message
        function typeWriter(element, text, speed, callback) {
            let i = 0;
            element.innerHTML = '';
            function type() {
                if (i < text.length) {
                    const char = text.charAt(i);
                    if (char === '\n') {
                        element.innerHTML += '<br>';
                    } else {
                        element.innerHTML += char;
                    }
                    i++;
                    setTimeout(type, speed);
                } else {
                    if (callback) callback();
                }
            }
            type();
        }

        // Start typewriter when message section is visible
        const messageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const paragraphs = entry.target.querySelectorAll('.message-box p[data-text]');
                    let index = 0;
                    function typeNext() {
                        if (index < paragraphs.length) {
                            const text = paragraphs[index].getAttribute('data-text');
                            typeWriter(paragraphs[index], text, 30, () => {
                                index++;
                                setTimeout(typeNext, 300); // Delay between paragraphs
                            });
                        }
                    }
                    typeNext();
                    messageObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        const messageSection = document.querySelector('.message-section');
        if (messageSection) {
            messageObserver.observe(messageSection);
        }

        // Start typewriter for birthday message when quiz section is visible
        const quizObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const birthdayMessage = entry.target.querySelector('.quiz-question');
                    const birthdaySignature = entry.target.querySelector('.birthday-signature');
                    
                    if (birthdayMessage) {
                        const messageText = birthdayMessage.getAttribute('data-text');
                        typeWriter(birthdayMessage, messageText, 50, () => {
                            // After main message, type the signature
                            if (birthdaySignature) {
                                setTimeout(() => {
                                    const signatureText = birthdaySignature.getAttribute('data-text');
                                    typeWriter(birthdaySignature, signatureText, 100);
                                }, 500);
                            }
                        });
                    }
                    quizObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.3 });

        const quizSection = document.querySelector('.quiz-section');
        if (quizSection) {
            quizObserver.observe(quizSection);
        }
// ‚îÄ‚îÄ Beautiful Moments Video ‚Äì Pause/Resume Background Music ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const momentsVideo = document.getElementById('momentsVideo');

if (momentsVideo) {
    let musicWasPlaying = false;

    // When video starts playing ‚Üí pause music
    momentsVideo.addEventListener('play', () => {
        if (isPlaying) {
            musicWasPlaying = true;
            music.pause();
            musicBtn.textContent = 'üîá';
            isPlaying = false;
        }
    });

    // When video pauses or ends ‚Üí resume music if it was playing before
    function resumeMusicAfterVideo() {
        if (musicWasPlaying && music.paused) {
            music.play().then(() => {
                isPlaying = true;
                musicBtn.textContent = 'üîä';
                musicWasPlaying = false; // reset
            }).catch(() => {
                // Autoplay may be blocked ‚Äì user interaction needed
            });
        }
    }

    momentsVideo.addEventListener('pause', resumeMusicAfterVideo);
    momentsVideo.addEventListener('ended', resumeMusicAfterVideo);
}
        // Interactive Envelope + Pop-up Letter (NO typewriter)
const envelopeContainer = document.getElementById('envelopeContainer');
const envelope = document.getElementById('envelope');
const letterPopup = document.getElementById('letterPopup');
const letterContent = document.getElementById('letterContent');
const tapHint = document.querySelector('.tap-hint');
let isEnvelopeOpened = false;

// All paragraphs combined into one clean message
const fullLetterMessage = `
    I want to tell you about some words in my heart to you.. üíú<br><br>
    I want to tell you that I love you deeply and I will forever be there for you, because I do care about you and I really love you from my heart.. I hope you know that. ü´∂üèª<br><br>
    Remember you have a place in my heart no one else could ever have, I love you today and tomorrow and forever, maybe I don‚Äôt see you everyday but I love you everyday üíï<br><br>
    Every morning I wake up my first thought is always you and your message. ü§ç<br><br>
    I love your eyes, your smile, your voice.., I love everything about you üíì<br><br>
    I won‚Äôt find someone like you and I won‚Äôt find even if I search all over the world üåé you are always there best üíó.., so I really hope I can be a better person for you ‚ú®.<br><br>
    I promise I will always care about you, I will always put you in my eyes and make you feel safe with me, I promise to be next to you all the time ‚ù§Ô∏è<br><br>
    I promise to keep do my best to make you feel loved and happy as you deserve. üòò<br><br>
    I will never get tired of loving you, you mean everything to me ü©∑<br><br>
    I promise I will always love you forever ‚ôæÔ∏è‚ù§Ô∏è.<br><br>
    I am the luckiest man ever to have you in my life ü•π‚ù§Ô∏è‚ù§Ô∏è<br><br>
    My heart belongs to you Nourhanty üíó
`;

if (envelopeContainer) {
    envelopeContainer.addEventListener('click', () => {
        if (isEnvelopeOpened) return;
        isEnvelopeOpened = true;

        // Open flap
        envelope.classList.add('opened');

        // Show popup after flap animation
        setTimeout(() => {
            letterPopup.classList.add('active');

            // Instantly show full message (no typing)
            letterContent.innerHTML = fullLetterMessage;
        }, 1600); // matches flap opening time
    });
}

function closeLetterPopup() {
    letterPopup.classList.remove('active');

    // Reset envelope so it can be opened again
    setTimeout(() => {
        envelope.classList.remove('opened');
        isEnvelopeOpened = false;
        letterContent.innerHTML = ''; // clear for next open
        if (tapHint) {
            tapHint.textContent = "‚ú® Tap the envelope to open your letter ‚ú®";
        }
    }, 700);
}

// Close when clicking outside
letterPopup.addEventListener('click', (e) => {
    if (e.target === letterPopup) {
        closeLetterPopup();
    }
});
// ‚îÄ‚îÄ Letter Video ‚Äì Pause/Resume Background Music ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const letterVideo = document.querySelector('.letter-video-container video');

if (letterVideo) {
    let musicWasPlayingBeforeLetter = false;

    letterVideo.addEventListener('play', () => {
        if (isPlaying) {
            musicWasPlayingBeforeLetter = true;
            music.pause();
            musicBtn.textContent = 'üîá';
            isPlaying = false;
        }
    });

    function resumeMusicAfterLetterVideo() {
        if (musicWasPlayingBeforeLetter && music.paused) {
            music.play().then(() => {
                isPlaying = true;
                musicBtn.textContent = 'üîä';
                musicWasPlayingBeforeLetter = false;
            }).catch(() => {});
        }
    }

    letterVideo.addEventListener('pause', resumeMusicAfterLetterVideo);
    letterVideo.addEventListener('ended', resumeMusicAfterLetterVideo);
}

// Fresh emoji rain system
function spawnRainingEmoji() {
    const rainContainer = document.getElementById('emojiRainContainer');
    if (!rainContainer) return;

    const emoji = document.createElement('div');
    emoji.className = 'falling-emoji';

    const emojiSet = ['üå∏', 'üéÇ', 'üíó'];
    emoji.textContent = emojiSet[Math.floor(Math.random() * emojiSet.length)];

    emoji.style.left = Math.random() * window.innerWidth + 'px';
    emoji.style.top = '-50px';
    
    const randomDuration = Math.random() * 3 + 4; // 4-7 seconds (faster)
    emoji.style.animation = `rainDown ${randomDuration}s linear forwards`;
    
    const randomSize = Math.random() * 24 + 24; // 24-48px
    emoji.style.fontSize = randomSize + 'px';

    rainContainer.appendChild(emoji);

    setTimeout(() => emoji.remove(), randomDuration * 1000);
}

function beginEmojiRain() {
    // Initial burst
    for (let i = 0; i < 12; i++) {
        setTimeout(spawnRainingEmoji, i * 150);
    }
    // Continuous rain (less dense)
    setInterval(spawnRainingEmoji, 1200);
}

// Important Moments carousel functionality
(function(){
    const data = [
        {src:'./Our first photo on your last birthday.jpeg', date:'21-01-2025', text:'Our first photo on your last birthday'},
        {src:'./That day in safari park.jpeg', date:'24-01-2025', text:'That day in safari park'},
        {src:'./Our lovely photo side by side in arcade.jpeg', date:'06-03-2025', text:'Our lovely photo side by side in arcade'},
        {src:'./Photo in a special day for me in dream park.jpeg',   date:'20-06-2025', text:'Photo in a special day for me in dream park'},
        {src:'./Our photo in a date night with my home.jpeg',   date:'10-09-2025', text:'Our photo in a date night with my home'},
        {src:'./You make me love my birthday.jpeg',   date:'20-11-2025', text:'You make me love my birthday'},
        {src:'./Always where I belong.jpeg',   date:'01-11-2025', text:'Always where I belong.'},
        {src:'./Closing 2025 in date with my fav person ever.jpeg',   date:'28-12-2025', text:'Closing 2025 in date with my fav person ever.'}
    ];

    const track = document.getElementById('momentsTrack');
    const wrapper = document.querySelector('.moments-track-wrapper');
    const indicators = document.getElementById('momentsIndicators'); // may be null if indicators removed
    const indexLabel = document.getElementById('momentsIndex');
    let current = 0;
    let autoplayId = null;

    function build() {
        data.forEach((item,i)=>{
            const li = document.createElement('li');
            li.className = 'moment-card';
            li.innerHTML = `
                <img class="moment-photo" src="${item.src}" alt="Moment ${i+1}">
                <div class="moment-body">
                    <div class="moment-date">${item.date}</div>
                    <div class="moment-text">${item.text}</div>
                </div>`;
            track.appendChild(li);

            if(indicators){
                const btn = document.createElement('button');
                btn.addEventListener('click', ()=> goTo(i));
                indicators.appendChild(btn);
            }
        });
        refreshIndicators();
        // compute edge padding so first/last can center
        setEdgePadding();
        // center first after layout
        setTimeout(()=> scrollToIndex(0, false), 60);
        startAutoplay();

        // adjust on resize
        window.addEventListener('resize', ()=>{
            setEdgePadding();
            // re-center current without smooth to avoid jumps
            scrollToIndex(current, false);
        });
    }

    function getCardElements(){ return Array.from(track.children); }

    function setEdgePadding(){
        const cards = getCardElements();
        if(!cards.length) return;
        const card = cards[0];
        const pad = Math.max(0, (wrapper.clientWidth - card.clientWidth) / 2);
        track.style.paddingLeft = pad + 'px';
        track.style.paddingRight = pad + 'px';
    }

    function scrollToIndex(idx, smooth=true){
        const cards = getCardElements();
        if (!cards[idx]) return;
        const card = cards[idx];
        const wrapperRect = wrapper.getBoundingClientRect();
        const cardRect = card.getBoundingClientRect();
        const left = card.offsetLeft - (wrapper.clientWidth - card.clientWidth)/2;
        wrapper.scrollTo({ left, behavior: smooth ? 'smooth' : 'auto' });
        current = idx;
        refreshIndicators();
    }

    function goTo(idx){ stopAutoplay(); scrollToIndex(idx); startAutoplay(); }

    function next(){ goTo((current+1)%data.length); }
    function prev(){ goTo((current-1+data.length)%data.length); }

    function refreshIndicators(){
        if(indicators){
            const btns = indicators.children;
            for(let i=0;i<btns.length;i++) btns[i].classList.toggle('active', i===current);
        }
        if(indexLabel) indexLabel.textContent = (current+1);
    }

    let carouselVisible = false;
    function startAutoplay(){
        // Autoplay disabled by user request ‚Äî navigation only via arrows or manual swipe.
        // Keep this stub so other code can call it safely without starting intervals.
        stopAutoplay();
        return;
    }
    function stopAutoplay(){ if(autoplayId) { clearInterval(autoplayId); autoplayId=null; } }

    // wire arrows
    const nextBtn = document.querySelector('.moments-next');
    const prevBtn = document.querySelector('.moments-prev');
    if(nextBtn) nextBtn.addEventListener('click', ()=>{ stopAutoplay(); next(); startAutoplay(); });
    if(prevBtn) prevBtn.addEventListener('click', ()=>{ stopAutoplay(); prev(); startAutoplay(); });

    // touch / pointer support ‚Äî single-card swipe per gesture and immediate counter update
    let gestureStartX = 0, gestureStartY = 0, lastX = 0, lastY = 0, isDown = false, activePointerId = null, lockDir = null, startScrollLeft = 0;
    const SWIPE_THRESHOLD = 40; // px ‚Äî minimum to count as a swipe

    function settleByDirectionAndReset(endX){
        // Prefer scroll-based delta (robust across devices). Positive deltaScroll => user moved content left (next).
        const SCROLL_THRESHOLD = 30; // px
        const deltaScroll = wrapper.scrollLeft - startScrollLeft;
        let target = current;
        if (Math.abs(deltaScroll) >= SCROLL_THRESHOLD) {
            if (deltaScroll > 0) target = Math.min(current + 1, data.length - 1);
            else target = Math.max(current - 1, 0);
        } else {
            // fallback to pointer delta if scroll delta is small
            const total = endX - gestureStartX;
            if (total <= -SWIPE_THRESHOLD) {
                target = Math.min(current + 1, data.length - 1);
            } else if (total >= SWIPE_THRESHOLD) {
                target = Math.max(current - 1, 0);
            } else {
                target = current;
            }
        }
        // manual change: stop, move, update indicators immediately
        stopAutoplay();
        scrollToIndex(target, true);
        startAutoplay();
    }

    wrapper.addEventListener('pointerdown', (e)=>{
        isDown = true;
        lockDir = null;
        activePointerId = e.pointerId;
        gestureStartX = e.clientX;
        gestureStartY = e.clientY;
        lastX = e.clientX;
        lastY = e.clientY;
        startScrollLeft = wrapper.scrollLeft;
        wrapper.style.scrollSnapType = 'none';
        try { wrapper.setPointerCapture(activePointerId); } catch (err) {}
    });

    wrapper.addEventListener('pointermove', (e)=>{
        if(!isDown || e.pointerId !== activePointerId) return;
        const dx = e.clientX - lastX;
        const dy = e.clientY - lastY;
        lastX = e.clientX;
        lastY = e.clientY;

        // determine gesture direction once after small movement
        if(lockDir === null){
            const totalDx = e.clientX - gestureStartX;
            const totalDy = e.clientY - gestureStartY;
            if(Math.abs(totalDx) < 6 && Math.abs(totalDy) < 6) return; // still a tap
            lockDir = Math.abs(totalDx) > Math.abs(totalDy) ? 'h' : 'v';
        }

        if(lockDir === 'v') return; // allow vertical scrolling, do not handle

        // horizontal handling
        e.preventDefault && e.preventDefault();
        wrapper.scrollLeft -= dx;
    });

    function onPointerEnd(e){
        if(!isDown || (e && e.pointerId && e.pointerId !== activePointerId)) return;
        isDown = false;
        try { if(activePointerId) wrapper.releasePointerCapture(activePointerId); } catch (err) {}
        activePointerId = null;
        wrapper.style.scrollSnapType = 'x mandatory';
        // if gesture was vertical, ignore
        if(lockDir === 'v') { lockDir = null; return; }
        const endX = (e && typeof e.clientX === 'number') ? e.clientX : lastX;
        lockDir = null;
        settleByDirectionAndReset(endX);
    }

    wrapper.addEventListener('pointerup', onPointerEnd);
    wrapper.addEventListener('pointercancel', onPointerEnd);
    wrapper.addEventListener('pointerleave', onPointerEnd);
    // fallback for touch-only browsers
    wrapper.addEventListener('touchend', (e)=> onPointerEnd(e.changedTouches ? { clientX: e.changedTouches[0].clientX } : e));
    wrapper.addEventListener('touchcancel', (e)=> onPointerEnd(e.changedTouches ? { clientX: e.changedTouches[0].clientX } : e));

    // Observe visibility of the section to control autoplay
    const momentsSection = document.getElementById('momentsSection');
    const visibilityObserver = new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
            if(en.isIntersecting){
                carouselVisible = true;
                // ensure padding/layout updated then start
                setEdgePadding();
                startAutoplay();
            } else {
                carouselVisible = false;
                stopAutoplay();
            }
        });
    }, { threshold: 0.5 });
    if(momentsSection) visibilityObserver.observe(momentsSection);

    // build on DOM ready
    document.addEventListener('DOMContentLoaded', build);
})();


    </script>
    <!-- Emoji rain effect -->
    <div class="emoji-rain-container" id="emojiRainContainer"></div>
</body>
</html>